@use "../../config/abstracts/mixins" as *;
@use "../../config/vars/colors" as *;
@use "../../config/vars/sizes" as *;

header {
  position: relative;
  z-index: 2;

  > div.navbar {
    background-color: var(--bg-section);
    border-bottom: .125rem solid var(--border-muted);
    height: $header-height;
    padding: 2rem 3rem 1rem;
    position: relative;
    z-index: 2;

    @include breakpoint-down(md) {
      height: calc($header-height - 1rem);
      padding: 1rem;
    }

    > div.nav-brand {
      padding: 0 1rem;
      z-index: 3;

      a.nav-logo {
        text-decoration: none;

        > svg {
          max-height: 100%;
          width: 3.5rem;
        }
      }
    }

    > nav.menu {
      @include breakpoint-down(lg) {
        background-color: var(--bg-section);
        flex-direction: column;
        left: 0;
        max-height: 0;
        overflow: hidden;
        padding: 0;
        position: absolute;
        top: calc($header-height);
        transition: max-height .15s ease-in-out;
        width: 100%;

        > div.nav-list {
          flex-direction: column;

          .nav-item {
            height: 4rem;
          }
        }
      }

      @include breakpoint-down(md) {
        top: calc($header-height - 1rem);
      }

      > div.nav-list .nav-item {
        column-gap: .25rem;
        padding: 0 1rem;
        white-space: pre-wrap;

        @include breakpoint-down(lg) {
          justify-content: flex-start;
          padding: 0 4rem;
        }

        @include breakpoint-down(md) {
          padding: 0 2rem;
        }

        &.link {
          font-weight: 700;

          &.profile {
            column-gap: .5rem;

            @include breakpoint-up(lg) {
              padding: 0 .5rem;
            }

            > img {
              border-radius: 50%;
              width: 2.5rem;
            }

            > i {
              font-size: 2.5rem;
              width: auto;
            }
          }
        }

        &.button {
          background-color: var(--nav-button);
          border-radius: .5rem;

          @include breakpoint-down(lg) {
            border-radius: unset;
          }

          &.login, &.logout, &.users {
            color: #FFF;

            @include shimmer(true, rgba(#FFF, .25));

            &.active::after {
              background-color: rgba(#FFF, .5);
            }

            @include hover-focus {
              &::after {
                background-color: rgba(#FFF, .25);
              }
            }
          }

          &.login {
            background-color: $green;

            @include hover-focus {
              background-color: $green-dark !important;
            }
          }

          &.logout {
            background-color: $red;

            @include hover-focus {
              background-color: $red-dark !important;
            }
          }

          &.users {
            background-color: $cyan;

            @include hover-focus {
              background-color: $cyan-dark !important;
            }
          }

          @include hover-focus {
            background-color: var(--button-hover);
          }
        }

        &.active {
          @include breakpoint-down(lg) {
            position: relative;

            &::after {
              background-color: var(--text-50);
              border-radius: .25rem;
              content: "";
              height: calc(100% - 2rem);
              left: 3rem;
              position: absolute;
              transition: height .15s ease-in-out;
              width: .375rem;

              @include breakpoint-down(md) {
                left: 1rem;
              }
            }

            @include hover-focus {
              &::after {
                background-color: var(--text-25);
                height: calc(100% - 2.25rem);
              }
            }

            > span::after {
              display: none;
            }
          }

          > span {
            position: relative;

            &::after {
              background-color: var(--text-50);
              border-radius: .125rem;
              bottom: .625rem;
              content: "";
              height: .25rem;
              position: absolute;
              transition: width .15s ease-in-out;
              width: calc(100% - .5rem);
            }
          }

          @include hover-focus {
            > span::after {
              background-color: var(--text-25);
              width: calc(100% - .75rem);
            }
          }
        }
      }
    }

    > div.nav-options {
      z-index: 3;

      @include breakpoint-up(lg) {
        flex: 0 0 auto;
      }

      div.theme-switch {
        cursor: pointer;
        width: 4rem;

        > i {
          font-size: 1.5rem;
        }

        @include hover-focus {
          > i {
            color: var(--text-75);
          }
        }
      }

      button.hamburger {
        display: none;
        padding: 0;

        @include breakpoint-down(lg) {
          display: flex;
        }

        > span {
          height: 4rem;
          width: 4rem;

          > span, > span::before, > span::after {
            background-color: var(--text);
            width: 2rem;
          }
        }

        @include hover-focus {
          opacity: 1;

          > span {
            > span, > span::before, > span::after {
              background-color: var(--text-75);
            }
          }
        }
      }
    }
  }
}
